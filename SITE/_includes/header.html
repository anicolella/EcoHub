<!-- Header include (EcoHub) -->
<!-- Menu dropdown nativo do Quarto - sem JavaScript customizado necessário -->

<!-- Google Fonts - Source Sans Pro -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">

<script>
// Dark mode toggle functionality
(function() {
  function initDarkModeToggle() {
    // Encontra o botão de dark mode
    const darkModeBtn = document.querySelector('a[aria-label="Toggle dark mode"]');
    if (!darkModeBtn) return;
    
    // Verifica preferência salva ou do sistema
    const savedTheme = localStorage.getItem('ecohub-theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const isDark = savedTheme === 'dark' || (!savedTheme && prefersDark);
    
    // Aplica tema inicial
    if (isDark) {
      document.documentElement.setAttribute('data-bs-theme', 'dark');
      updateIcon(darkModeBtn, true);
    }
    
    // Adiciona evento de clique
    darkModeBtn.addEventListener('click', function(e) {
      e.preventDefault();
      const currentTheme = document.documentElement.getAttribute('data-bs-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      document.documentElement.setAttribute('data-bs-theme', newTheme);
      localStorage.setItem('ecohub-theme', newTheme);
      updateIcon(darkModeBtn, newTheme === 'dark');
    });
  }
  
  function updateIcon(btn, isDark) {
    const icon = btn.querySelector('i');
    if (icon) {
      icon.className = isDark ? 'bi bi-sun' : 'bi bi-moon';
    }
  }
  
  // Inicializa quando DOM estiver pronto
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initDarkModeToggle);
  } else {
    initDarkModeToggle();
  }
})();
</script>
